!function(){"use strict";const e=document.querySelector("body"),t=document.querySelector(".top"),o=document.getElementById("share_button");o&&o.addEventListener("click",(function(e){e.preventDefault(),navigator.share({title:document.title,url:window.location})}));const c=document.getElementById("orderDialog"),d=document.getElementById("questionDialog"),r=document.getElementById("commentDialog"),s=document.querySelectorAll(".openOrderDialogBtn"),n=document.querySelectorAll(".openQuestionDialogBtn"),l=document.getElementById("openCommentDialogBtn");if(s&&s.forEach((e=>{e.addEventListener("click",(()=>{c.showModal()}))})),n&&n.forEach((e=>{e.addEventListener("click",(()=>{d.showModal()}))})),l&&l.addEventListener("click",(()=>{r.showModal()})),c){c.querySelector(".close-modal").addEventListener("click",(()=>{c.close("")}))}if(d){d.querySelector(".close-modal").addEventListener("click",(()=>{d.close()}))}if(r){r.querySelector(".close-modal").addEventListener("click",(()=>{r.close()}))}window.addEventListener("load",(function(){document.querySelector(".carousel")&&function(){const e=document.querySelector(".carousel"),t=e.querySelector(".slider"),o=e.querySelector(".slide"),c=t.children.length;let d=o.offsetWidth;const r=e.querySelector(".carousel-dots"),s=[];for(let e=0;e<c;e++){const t=document.createElement("button");t.classList.add("dot"),t.setAttribute("aria-label",`Slide ${e+1}`),t.addEventListener("click",(()=>a(e))),r.appendChild(t),s.push(t)}const n=()=>{if(d=o.offsetWidth,0===d)return;const e=Math.round(t.scrollLeft/d);s.forEach(((t,o)=>{o===e?t.classList.add("active"):t.classList.remove("active")}))};n(),document.querySelector("#button_bck").addEventListener("click",(()=>a("backward"))),document.querySelector("#button_fwd").addEventListener("click",(()=>a("forward"))),document.addEventListener("keydown",(e=>{"ArrowLeft"===e.code?a("backward"):"ArrowRight"===e.code&&a("forward")})),window.addEventListener("resize",(()=>{d=o.offsetWidth}));const l=e=>{const o=t.scrollWidth-d;if("forward"===e){const e=t.scrollLeft+d;return e<=o?e:0}if("backward"===e){if(t.scrollLeft<=1)return o;{const e=t.scrollLeft-d;return e>=0?e:0}}if("number"==typeof e){return e*d}},a=e=>{t.scrollLeft=l(e),n()};t.addEventListener("scroll",(()=>{n()}))}()})),t&&t.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.scrollIntoView(!0,{behavior:"smooth"})}),!1),document.addEventListener("DOMContentLoaded",(()=>{async function e(e){e.preventDefault();const t=e.target,o={};for(const e of t.elements)e.name&&(o[e.name]=e.value);const c=t.parentNode.querySelector(".form-loading"),d=t.parentNode.querySelector(".form-success"),r=t.parentNode.querySelector(".form-error");t.classList.add("fhide"),c.classList.remove("fhide"),c.classList.add("fade-in");try{const e=await fetch("https://social-octopus.blok44.ru/",{method:"POST",body:JSON.stringify(o)});e.ok?(console.log("Форма успешно отправлена!"),ym(92482398,"reachGoal","lead"),c.classList.add("fhide"),d.classList.remove("fhide"),d.classList.add("fade-in")):(console.error("Ошибка при отправке формы:",e.status),c.classList.add("fhide"),r.classList.remove("fhide"),r.classList.add("fade-in"))}catch(e){console.error("Произошла ошибка:",e),c.classList.add("fhide"),r.classList.remove("fhide"),r.classList.add("fade-in")}finally{setTimeout((()=>{c.classList.add("fhide"),d.classList.add("fhide"),r.classList.add("fhide"),t.classList.remove("fhide"),t.reset()}),5e3)}}document.querySelectorAll("form").forEach((t=>{t.addEventListener("submit",e)}))}));const a=document.querySelector("#opa-button");a&&a.addEventListener("click",(()=>{ym(92482398,"reachGoal","opa")}))}();